# YouTubeè§†é¢‘ä¸‹è½½å™¨ - å®Œæ•´æ“ä½œæ‰‹å†Œ

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [ç¯å¢ƒè¦æ±‚](#ç¯å¢ƒè¦æ±‚)
3. [æ–‡ä»¶ç»“æ„](#æ–‡ä»¶ç»“æ„)
4. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
5. [è¯¦ç»†ä½¿ç”¨è¯´æ˜](#è¯¦ç»†ä½¿ç”¨è¯´æ˜)
6. [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
8. [é«˜çº§åŠŸèƒ½](#é«˜çº§åŠŸèƒ½)
9. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹
æœ¬å·¥å…·æ˜¯åŸºäºPythonçš„YouTubeè§†é¢‘ä¸‹è½½å™¨ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- **åŒç‰ˆæœ¬è¿è¡Œ**ï¼šæ”¯æŒäº¤äº’å¼ç•Œé¢å’Œå‘½ä»¤è¡Œæ¨¡å¼
- **æ™ºèƒ½ç¯å¢ƒç®¡ç†**ï¼šè‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
- **æ ¼å¼é€‰æ‹©çµæ´»**ï¼šæ”¯æŒåˆ†è¾¨ç‡ã€éŸ³é¢‘è´¨é‡é€‰æ‹©
- **è®¤è¯å¤„ç†å®Œå–„**ï¼šæ”¯æŒæµè§ˆå™¨cookiesæå–å’Œæ–‡ä»¶è®¤è¯
- **é”™è¯¯æ¢å¤æœºåˆ¶**ï¼šå¤šè½®é‡è¯•ä¸‹è½½ï¼Œè‡ªåŠ¨å¤„ç†ç½‘ç»œé—®é¢˜

### 1.2 æ ¸å¿ƒç»„ä»¶
| ç»„ä»¶ | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `video.py` | åŸå§‹äº¤äº’å¼è„šæœ¬ | æ–°æ‰‹ç”¨æˆ·ï¼Œéœ€è¦é€æ­¥æŒ‡å¯¼ |
| `video_cli.py` | å‘½ä»¤è¡Œå¢å¼ºç‰ˆ | é«˜çº§ç”¨æˆ·ï¼Œéœ€è¦æ‰¹é‡å¤„ç† |
| `run_video.sh` | macOS/Linuxå¯åŠ¨è„šæœ¬ | è·¨å¹³å°ä½¿ç”¨ï¼Œè‡ªåŠ¨ç¯å¢ƒç®¡ç† |
| `run_video.bat` | Windowså¯åŠ¨è„šæœ¬ | Windowsç”¨æˆ·ä½¿ç”¨ |
| `config.yaml` | é…ç½®æ–‡ä»¶ | å­˜å‚¨ç”¨æˆ·åå¥½è®¾ç½® |

## ğŸ’» ç¯å¢ƒè¦æ±‚

### 2.1 åŸºç¡€ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**ï¼šmacOSã€Linuxã€Windows
- **Pythonç‰ˆæœ¬**ï¼š3.8æˆ–æ›´é«˜ç‰ˆæœ¬
- **è™šæ‹Ÿç¯å¢ƒ**ï¼šå·²é¢„é…ç½®åœ¨ `video/` ç›®å½•

### 2.2 ä¾èµ–åŒ…
æ ¸å¿ƒä¾èµ–å·²åœ¨ `requirements.txt` ä¸­å®šä¹‰ï¼š
```txt
yt-dlp==2025.1.15      # YouTubeä¸‹è½½æ ¸å¿ƒ
moviepy==1.0.3         # è§†é¢‘å¤„ç†
pydub==0.25.1          # éŸ³é¢‘å¤„ç†
requests==2.32.3       # HTTPè¯·æ±‚
urllib3==2.3.0         # URLå¤„ç†
```

### 2.3 å¯é€‰å·¥å…·
- **aria2c**ï¼šåŠ é€Ÿä¸‹è½½å·¥å…·ï¼ˆæ¨èå®‰è£…ï¼‰
- **ffmpeg**ï¼šéŸ³è§†é¢‘å¤„ç†å·¥å…·ï¼ˆå·²åŒ…å«åœ¨yt-dlpä¸­ï¼‰

## ğŸ“ æ–‡ä»¶ç»“æ„

```
Video/
â”œâ”€â”€ video.py              # åŸå§‹äº¤äº’å¼è„šæœ¬ï¼ˆä¿ç•™å®Œæ•´åŠŸèƒ½ï¼‰
â”œâ”€â”€ video_cli.py          # å‘½ä»¤è¡Œå¢å¼ºç‰ˆæœ¬ï¼ˆæ–°å¢åŠŸèƒ½ï¼‰
â”œâ”€â”€ run_video.sh          # macOS/Linuxå¯åŠ¨è„šæœ¬ï¼ˆè‡ªåŠ¨ç¯å¢ƒç®¡ç†ï¼‰
â”œâ”€â”€ run_video.bat         # Windowså¯åŠ¨è„šæœ¬ï¼ˆè‡ªåŠ¨ç¯å¢ƒç®¡ç†ï¼‰
â”œâ”€â”€ config.yaml           # é…ç½®æ–‡ä»¶ï¼ˆå­˜å‚¨ç”¨æˆ·åå¥½ï¼‰
â”œâ”€â”€ requirements.txt      # Pythonä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README_NEW.md         # å¿«é€Ÿä½¿ç”¨æŒ‡å—
â”œâ”€â”€ æ“ä½œæ‰‹å†Œ.md           # æœ¬æ–‡æ¡£ï¼ˆå®Œæ•´è¯´æ˜ï¼‰
â”‚
â”œâ”€â”€ video/                # Pythonè™šæ‹Ÿç¯å¢ƒç›®å½•ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ bin/              # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆmacOS/Linuxï¼‰
â”‚   â”œâ”€â”€ Scripts/          # å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆWindowsï¼‰
â”‚   â”œâ”€â”€ lib/              # Pythonåº“æ–‡ä»¶
â”‚   â””â”€â”€ pyvenv.cfg        # è™šæ‹Ÿç¯å¢ƒé…ç½®
â”‚
â”œâ”€â”€ download/             # é»˜è®¤ä¸‹è½½ç›®å½•
â”‚   â””â”€â”€ *.mp4             # ä¸‹è½½çš„è§†é¢‘æ–‡ä»¶
â”‚
â””â”€â”€ cookies.txt           # è®¤è¯cookieæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 4.1 é¦–æ¬¡ä½¿ç”¨å‡†å¤‡

#### macOS/Linuxç”¨æˆ·
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/xfpan/Desktop/VedioPy/Video

# 2. èµ‹äºˆå¯åŠ¨è„šæœ¬æ‰§è¡Œæƒé™ï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰
chmod +x run_video.sh

# 3. è¿è¡Œäº¤äº’å¼ç‰ˆæœ¬
./run_video.sh
```

#### Windowsç”¨æˆ·
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd C:\Users\xfpan\Desktop\VedioPy\Video

# 2. ç›´æ¥è¿è¡Œæ‰¹å¤„ç†è„šæœ¬
run_video.bat
```

### 4.2 é¦–æ¬¡è¿è¡Œæµç¨‹
1. è„šæœ¬è‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
2. æ£€æŸ¥Pythonä¾èµ–ï¼ˆå¦‚æœ‰ç¼ºå¤±è‡ªåŠ¨å®‰è£…ï¼‰
3. è¿›å…¥äº¤äº’å¼ç•Œé¢æˆ–å‘½ä»¤è¡Œæ¨¡å¼
4. æ ¹æ®æç¤ºå®Œæˆä¸‹è½½

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### 5.1 äº¤äº’å¼æ¨¡å¼ï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰

#### å¯åŠ¨æ–¹å¼
```bash
# macOS/Linux
./run_video.sh

# Windows
run_video.bat
```

#### æ“ä½œæµç¨‹
1. **è¾“å…¥è§†é¢‘URL**ï¼šç²˜è´´YouTubeè§†é¢‘é“¾æ¥
2. **è®¤è¯é€‰æ‹©**ï¼š
   - ä½¿ç”¨ç°æœ‰cookies.txtæ–‡ä»¶
   - ä»æµè§ˆå™¨æå–cookiesï¼ˆæ¨èï¼‰
   - æŒ‡å®šè‡ªå®šä¹‰cookieæ–‡ä»¶
   - è·³è¿‡è®¤è¯ï¼ˆå¯èƒ½æ— æ³•ä¸‹è½½ï¼‰
3. **æ¸…æ™°åº¦é€‰æ‹©**ï¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨åˆ†è¾¨ç‡ï¼ˆä»é«˜åˆ°ä½ï¼‰
4. **éŸ³é¢‘é€‰æ‹©**ï¼šå¦‚æœ‰å¤šä¸ªéŸ³é¢‘æµï¼Œé€‰æ‹©éŸ³è´¨
5. **æ–‡ä»¶åè®¾ç½®**ï¼šå¯è‡ªå®šä¹‰æ–‡ä»¶å
6. **å¼€å§‹ä¸‹è½½**ï¼šæ˜¾ç¤ºä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€

#### ç¤ºä¾‹å¯¹è¯
```
è¯·è¾“å…¥è¦ä¸‹è½½çš„è§†é¢‘é“¾æ¥: https://youtube.com/watch?v=example

===== YouTubeè®¤è¯è®¾ç½® =====
YouTubeéœ€è¦è®¤è¯ä»¥ç¡®è®¤æ‚¨ä¸æ˜¯æœºå™¨äººã€‚è¯·é€‰æ‹©è®¤è¯æ–¹å¼:
1. ä½¿ç”¨å·²æœ‰çš„cookies.txtæ–‡ä»¶ (å¦‚æœå­˜åœ¨)
2. ä»æµè§ˆå™¨ä¸­æå–cookies (æ¨è)
3. æŒ‡å®šè‡ªå®šä¹‰cookieæ–‡ä»¶è·¯å¾„
4. è·³è¿‡è®¤è¯ (å¯èƒ½æ— æ³•ä¸‹è½½éƒ¨åˆ†è§†é¢‘)
è¯·è¾“å…¥é€‰é¡¹ [1-4]: 2

æ£€æµ‹åˆ°ä»¥ä¸‹æ¸…æ™°åº¦å¯ä¾›é€‰æ‹©:
1. 2160p (å•æ–‡ä»¶-å«éŸ³é¢‘)
2. 2160p (åˆ†ç¦»æ–‡ä»¶-éœ€è¦åˆå¹¶éŸ³é¢‘)
3. 1440p (å•æ–‡ä»¶-å«éŸ³é¢‘)
4. 1080p (å•æ–‡ä»¶-å«éŸ³é¢‘)
5. 720p (å•æ–‡ä»¶-å«éŸ³é¢‘)

è¯·è¾“å…¥è¦ä¸‹è½½çš„é€‰é¡¹ç¼–å·(å¦‚ '1'), æˆ–è¾“å…¥ 'q' æ”¾å¼ƒ: 1

æ˜¯å¦éœ€è¦è‡ªå®šä¹‰æ–‡ä»¶åï¼Ÿ(y/nï¼Œé»˜è®¤n): n

å·²é€‰æ‹©2160pï¼ˆå•æ–‡ä»¶ï¼‰ï¼Œå³å°†å¼€å§‹ä¸‹è½½...
```

### 5.2 å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆé«˜æ•ˆæ–¹å¼ï¼‰

#### åŸºæœ¬è¯­æ³•
```bash
./run_video.sh [URL] [é€‰é¡¹]
```

#### å¸¸ç”¨å‘½ä»¤ç¤ºä¾‹

**1. åŸºç¡€ä¸‹è½½**
```bash
# äº¤äº’å¼é€‰æ‹©æ¸…æ™°åº¦
./run_video.sh https://youtube.com/watch?v=xxx

# æŒ‡å®šåˆ†è¾¨ç‡é€‰é¡¹ï¼ˆæŸ¥çœ‹åˆ—è¡¨åé€‰æ‹©ï¼‰
./run_video.sh https://youtube.com/watch?v=xxx --resolution 2

# åŒæ—¶æŒ‡å®šåˆ†è¾¨ç‡å’ŒéŸ³é¢‘
./run_video.sh https://youtube.com/watch?v=xxx --resolution 2 --audio 1
```

**2. ä¿¡æ¯æŸ¥çœ‹**
```bash
# ä»…åˆ—å‡ºæ ¼å¼ï¼Œä¸ä¸‹è½½
./run_video.sh https://youtube.com/watch?v=xxx --list

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./run_video.sh --help
```

**3. è‡ªå®šä¹‰è®¾ç½®**
```bash
# æŒ‡å®šè¾“å‡ºç›®å½•
./run_video.sh https://youtube.com/watch?v=xxx --output ./my_videos

# è‡ªå®šä¹‰æ–‡ä»¶å
./run_video.sh https://youtube.com/watch?v=xxx --name "æˆ‘çš„è§†é¢‘"

# è·³è¿‡è®¤è¯
./run_video.sh https://youtube.com/watch?v=xxx --no-auth

# ä½¿ç”¨æŒ‡å®šcookieæ–‡ä»¶
./run_video.sh https://youtube.com/watch?v=xxx --cookies ~/cookies.txt

# æŒ‡å®šæµè§ˆå™¨ç±»å‹æå–cookies
./run_video.sh https://youtube.com/watch?v=xxx --browser chrome
```

**4. æ‰¹é‡ä¸‹è½½**
```bash
# åˆ›å»ºURLåˆ—è¡¨æ–‡ä»¶ urls.txt
echo "https://youtube.com/watch?v=xxx1" > urls.txt
echo "https://youtube.com/watch?v=xxx2" >> urls.txt
echo "https://youtube.com/watch?v=xxx3" >> urls.txt

# æ‰¹é‡ä¸‹è½½
./run_video.sh --batch urls.txt
```

### 5.3 å‘½ä»¤è¡Œå‚æ•°è¯¦è§£

| å‚æ•° | ç¼©å†™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `url` | - | YouTubeè§†é¢‘URLï¼ˆå¯é€‰ï¼‰ | `https://youtube.com/watch?v=xxx` |
| `--list` | `-l` | ä»…åˆ—å‡ºæ ¼å¼ï¼Œä¸ä¸‹è½½ | `--list` |
| `--resolution` | `-r` | åˆ†è¾¨ç‡é€‰é¡¹ç¼–å· | `--resolution 2` |
| `--audio` | `-a` | éŸ³é¢‘é€‰é¡¹ç¼–å· | `--audio 1` |
| `--output` | `-o` | è¾“å‡ºç›®å½• | `--output ./videos` |
| `--name` | `-n` | è‡ªå®šä¹‰æ–‡ä»¶å | `--name "æ•™ç¨‹è§†é¢‘"` |
| `--no-auth` | - | è·³è¿‡è®¤è¯ | `--no-auth` |
| `--cookies` | - | cookieæ–‡ä»¶è·¯å¾„ | `--cookies ~/cookies.txt` |
| `--browser` | - | æµè§ˆå™¨ç±»å‹ | `--browser chrome` |
| `--batch` | - | æ‰¹é‡ä¸‹è½½æ–‡ä»¶ | `--batch urls.txt` |

### 5.4 åˆ†è¾¨ç‡å’ŒéŸ³é¢‘é€‰æ‹©é€»è¾‘

**åˆ†è¾¨ç‡é€‰é¡¹ç¼–å·è¯´æ˜**ï¼š
- è„šæœ¬ä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨åˆ†è¾¨ç‡ï¼ˆä»é«˜åˆ°ä½æ’åºï¼‰
- æ¯ä¸ªåˆ†è¾¨ç‡å¯èƒ½æœ‰å¤šç§æ ¼å¼ï¼š
  - å•æ–‡ä»¶ï¼ˆåŒ…å«éŸ³è§†é¢‘ï¼‰ï¼šå¦‚ "2160p (å•æ–‡ä»¶-å«éŸ³é¢‘)"
  - åˆ†ç¦»æ–‡ä»¶ï¼ˆéœ€åˆå¹¶éŸ³é¢‘ï¼‰ï¼šå¦‚ "2160p (åˆ†ç¦»æ–‡ä»¶-éœ€è¦åˆå¹¶éŸ³é¢‘)"
- é€‰é¡¹ç¼–å·ä»1å¼€å§‹é€’å¢

**éŸ³é¢‘é€‰é¡¹ç¼–å·è¯´æ˜**ï¼š
- å½“é€‰æ‹©åˆ†ç¦»æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€‰æ‹©éŸ³é¢‘æµ
- éŸ³é¢‘æŒ‰ç ç‡ï¼ˆkbpsï¼‰ä»é«˜åˆ°ä½æ’åº
- é€‰é¡¹ç¼–å·ä»1å¼€å§‹ï¼ˆ1ä¸ºæœ€é«˜éŸ³è´¨ï¼‰

## âš™ï¸ é…ç½®è¯´æ˜

### 6.1 é…ç½®æ–‡ä»¶ä½ç½®
- é¡¹ç›®ç›®å½•ï¼š`./config.yaml`ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰
- ç”¨æˆ·ç›®å½•ï¼š`~/.videodownloader/config.yaml`

### 6.2 é…ç½®ç¤ºä¾‹
```yaml
# YouTubeè§†é¢‘ä¸‹è½½å™¨é…ç½®æ–‡ä»¶

defaults:
  # é»˜è®¤ä¸‹è½½ç›®å½•ï¼ˆæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ï¼‰
  download_dir: ./download

  # é»˜è®¤è¾“å‡ºæ ¼å¼
  format: mp4

  # é»˜è®¤åˆå¹¶éŸ³é¢‘
  merge_audio: true

  # é‡è¯•æ¬¡æ•°
  retry_times: 3

  # æœ€å¤§é‡è¯•è½®æ•°
  max_rounds: 3

authentication:
  # é»˜è®¤cookieæ–‡ä»¶è·¯å¾„ï¼ˆæ”¯æŒ ~ æ‰©å±•ï¼‰
  cookies_file: ~/.youtube_cookies.txt

  # é»˜è®¤æµè§ˆå™¨ç±»å‹ï¼ˆç”¨äºè‡ªåŠ¨æå–cookiesï¼‰
  # å¯é€‰: chrome, firefox, edge, safari, opera, brave, chromium
  browser: chrome

  # æ˜¯å¦è·³è¿‡è®¤è¯ï¼ˆä¸æ¨èï¼‰
  skip_auth: false

quality:
  # é»˜è®¤é¦–é€‰åˆ†è¾¨ç‡ï¼ˆåƒç´ é«˜åº¦ï¼Œå¦‚720, 1080, 1440, 2160ï¼‰
  # è®¾ä¸º0è¡¨ç¤ºè‡ªåŠ¨é€‰æ‹©æœ€é«˜è´¨é‡
  preferred_resolution: 1080

  # é»˜è®¤éŸ³é¢‘è´¨é‡åå¥½
  # å¯é€‰: best, high, medium, low
  audio_quality: best

network:
  # ä»£ç†è®¾ç½®ï¼ˆç•™ç©ºè¡¨ç¤ºä¸ä½¿ç”¨ï¼‰
  # æ ¼å¼: http://user:pass@host:port æˆ– socks5://host:port
  proxy:

  # è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  timeout: 300

  # User-Agentå­—ç¬¦ä¸²
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"

advanced:
  # æ˜¯å¦ä½¿ç”¨aria2cåŠ é€Ÿä¸‹è½½ï¼ˆå¦‚æœå¯ç”¨ï¼‰
  use_aria2c: true

  # æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
  verbose: true

  # æ˜¯å¦è·³è¿‡è¯ä¹¦éªŒè¯ï¼ˆä»…åœ¨ä¸å®‰å…¨ç½‘ç»œä¸­ä½¿ç”¨ï¼‰
  no_check_certificate: false
```

### 6.3 é…ç½®ä¼˜å…ˆçº§
1. **å‘½ä»¤è¡Œå‚æ•°**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. **ç¯å¢ƒå˜é‡**
3. **é…ç½®æ–‡ä»¶**ï¼ˆ`./config.yaml`ï¼‰
4. **ç”¨æˆ·é…ç½®æ–‡ä»¶**ï¼ˆ`~/.videodownloader/config.yaml`ï¼‰
5. **ç¨‹åºé»˜è®¤å€¼**ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰

### 6.4 é…ç½®æ–‡ä»¶ç”Ÿæˆ
```bash
# å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå¯æ‰‹åŠ¨åˆ›å»º
cp config.yaml.example config.yaml

# æˆ–ä½¿ç”¨é»˜è®¤é…ç½®
cat > config.yaml << 'EOF'
defaults:
  download_dir: ./download
  format: mp4
authentication:
  browser: chrome
EOF
```

## ğŸ”§ æ•…éšœæ’é™¤

### 7.1 å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### é—®é¢˜1ï¼šå¯åŠ¨è„šæœ¬æƒé™ä¸è¶³
```
-bash: ./run_video.sh: Permission denied
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
chmod +x run_video.sh
```

#### é—®é¢˜2ï¼šè™šæ‹Ÿç¯å¢ƒæŸå
```
é”™è¯¯: è™šæ‹Ÿç¯å¢ƒç›®å½•ä¸å®Œæ•´: video/
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# åˆ é™¤æŸåçš„ç¯å¢ƒ
rm -rf video/

# é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd /Users/xfpan/Desktop/VedioPy/Video
python -m venv video
source video/bin/activate
pip install -r requirements.txt
```

#### é—®é¢˜3ï¼šç¼ºå°‘Pythonä¾èµ–
```
ModuleNotFoundError: No module named 'yt_dlp'
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# è‡ªåŠ¨ä¿®å¤ï¼ˆæ¨èï¼‰
./run_video.sh --help

# æˆ–æ‰‹åŠ¨å®‰è£…
source video/bin/activate
pip install -r requirements.txt
```

#### é—®é¢˜4ï¼šYouTubeè®¤è¯å¤±è´¥
```
Sign in to confirm you're not a bot
```
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨ç°æœ‰cookies**ï¼š
   ```bash
   ./run_video.sh [URL] --cookies cookies.txt
   ```

2. **ä»æµè§ˆå™¨æå–**ï¼š
   ```bash
   ./run_video.sh [URL] --browser chrome
   ```

3. **æ‰‹åŠ¨è·å–cookies**ï¼š
   - ä½¿ç”¨æµè§ˆå™¨æ’ä»¶ï¼ˆå¦‚Get cookies.txtï¼‰
   - ä¿å­˜ä¸º `cookies.txt` åˆ°é¡¹ç›®ç›®å½•

#### é—®é¢˜5ï¼šä¸‹è½½é€Ÿåº¦æ…¢
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **å®‰è£…aria2c**ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   # macOS
   brew install aria2

   # Ubuntu/Debian
   sudo apt-get install aria2

   # Windowsï¼ˆä½¿ç”¨Chocolateyï¼‰
   choco install aria2
   ```

2. **ä½¿ç”¨ä»£ç†**ï¼š
   ```bash
   # è®¾ç½®ç¯å¢ƒå˜é‡
   export HTTPS_PROXY=http://proxy:port

   # æˆ–ä½¿ç”¨é…ç½®æ–‡ä»¶
   # network.proxy: "http://proxy:port"
   ```

#### é—®é¢˜6ï¼šæ–‡ä»¶åä¹±ç æˆ–éæ³•å­—ç¬¦
**è§£å†³æ–¹æ¡ˆ**ï¼š
- è„šæœ¬è‡ªåŠ¨æ¸…ç†éæ³•å­—ç¬¦
- å¯ä½¿ç”¨ `--name` å‚æ•°æŒ‡å®šç®€å•æ–‡ä»¶å

### 7.2 é”™è¯¯ä»£ç è¯´æ˜

| é”™è¯¯ä¿¡æ¯ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|----------|----------|----------|
| `HTTP 403 Forbidden` | IPè¢«å°æˆ–éœ€è¦è®¤è¯ | ä½¿ç”¨cookiesè®¤è¯ |
| `Format not available` | è¯·æ±‚çš„æ ¼å¼ä¸å­˜åœ¨ | ä½¿ç”¨ `--list` æŸ¥çœ‹å¯ç”¨æ ¼å¼ |
| `Network is unreachable` | ç½‘ç»œè¿æ¥é—®é¢˜ | æ£€æŸ¥ç½‘ç»œï¼Œä½¿ç”¨ä»£ç† |
| `Cookie file not found` | cookieæ–‡ä»¶ä¸å­˜åœ¨ | æŒ‡å®šæ­£ç¡®çš„æ–‡ä»¶è·¯å¾„ |
| `Out of disk space` | ç£ç›˜ç©ºé—´ä¸è¶³ | æ¸…ç†ç£ç›˜ç©ºé—´ |

### 7.3 æ—¥å¿—å’Œè°ƒè¯•
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
./run_video.sh [URL] 2>&1 | tee download.log

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
tail -f download.log

# è°ƒè¯•æ¨¡å¼ï¼ˆç›´æ¥è¿è¡ŒPythonï¼‰
source video/bin/activate
python -m pdb video_cli.py [URL]
```

## ğŸš€ é«˜çº§åŠŸèƒ½

### 8.1 æ‰¹é‡å¤„ç†è„šæœ¬

#### åˆ›å»ºæ‰¹é‡ä¸‹è½½è„šæœ¬
```bash
#!/bin/bash
# batch_download.sh

URLS=(
  "https://youtube.com/watch?v=xxx1"
  "https://youtube.com/watch?v=xxx2"
  "https://youtube.com/watch?v=xxx3"
)

for url in "${URLS[@]}"; do
  echo "æ­£åœ¨ä¸‹è½½: $url"
  ./run_video.sh "$url" --resolution 1 --output ./batch_downloads
  echo "ç­‰å¾…5ç§’..."
  sleep 5
done
```

#### ä½¿ç”¨URLåˆ—è¡¨æ–‡ä»¶
```bash
# urls.txt æ ¼å¼
https://youtube.com/watch?v=xxx1
https://youtube.com/watch?v=xxx2
https://youtube.com/watch?v=xxx3

# æ‰¹é‡ä¸‹è½½
./run_video.sh --batch urls.txt --resolution 1 --output ./batch_results
```

### 8.2 è‡ªåŠ¨åŒ–è°ƒåº¦

#### macOS/Linuxï¼ˆcrontabï¼‰
```bash
# ç¼–è¾‘å®šæ—¶ä»»åŠ¡
crontab -e

# æ¯å¤©å‡Œæ™¨2ç‚¹ä¸‹è½½æŒ‡å®šè§†é¢‘
0 2 * * * cd /Users/xfpan/Desktop/VedioPy/Video && ./run_video.sh https://youtube.com/watch?v=xxx --resolution 2

# æ¯å‘¨ä¸€æ›´æ–°è®¢é˜…å†…å®¹
0 9 * * 1 cd /Users/xfpan/Desktop/VedioPy/Video && ./run_video.sh --batch weekly_urls.txt
```

#### Windowsï¼ˆä»»åŠ¡è®¡åˆ’ç¨‹åºï¼‰
1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº"
2. åˆ›å»ºåŸºæœ¬ä»»åŠ¡
3. ç¨‹åºæˆ–è„šæœ¬ï¼š`C:\Users\xfpan\Desktop\VedioPy\Video\run_video.bat`
4. å‚æ•°ï¼š`https://youtube.com/watch?v=xxx --resolution 2`
5. è®¾ç½®è§¦å‘æ—¶é—´å’Œé¢‘ç‡

### 8.3 é›†æˆåˆ°å…¶ä»–è„šæœ¬

#### Pythoné›†æˆç¤ºä¾‹
```python
#!/usr/bin/env python3
import subprocess
import json

def download_video(url, resolution=1, output_dir="./downloads"):
    """è°ƒç”¨è§†é¢‘ä¸‹è½½å™¨"""
    cmd = [
        "./run_video.sh",
        url,
        "--resolution", str(resolution),
        "--output", output_dir,
        "--no-auth"  # å¦‚æœä¸éœ€è¦è®¤è¯
    ]

    try:
        result = subprocess.run(cmd, capture_output=True, text=True, timeout=600)
        if result.returncode == 0:
            print(f"ä¸‹è½½æˆåŠŸ: {url}")
            return True
        else:
            print(f"ä¸‹è½½å¤±è´¥: {url}")
            print(f"é”™è¯¯: {result.stderr}")
            return False
    except subprocess.TimeoutExpired:
        print(f"ä¸‹è½½è¶…æ—¶: {url}")
        return False

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    videos = [
        "https://youtube.com/watch?v=xxx1",
        "https://youtube.com/watch?v=xxx2",
    ]

    for video in videos:
        download_video(video, resolution=2, output_dir="./my_videos")
```

#### Shellè„šæœ¬é›†æˆ
```bash
#!/bin/bash
# download_manager.sh

CONFIG_FILE="./download_config.json"
LOG_FILE="./download.log"

# è¯»å–é…ç½®
if [ -f "$CONFIG_FILE" ]; then
    RESOLUTION=$(jq -r '.resolution // 1' "$CONFIG_FILE")
    OUTPUT_DIR=$(jq -r '.output_dir // "./download"' "$CONFIG_FILE")
else
    RESOLUTION=1
    OUTPUT_DIR="./download"
fi

# ä¸‹è½½å‡½æ•°
download_video() {
    local url="$1"
    echo "[$(date)] å¼€å§‹ä¸‹è½½: $url" >> "$LOG_FILE"

    ./run_video.sh "$url" \
        --resolution "$RESOLUTION" \
        --output "$OUTPUT_DIR" \
        --no-auth 2>&1 | tee -a "$LOG_FILE"

    local status=$?
    if [ $status -eq 0 ]; then
        echo "[$(date)] ä¸‹è½½æˆåŠŸ: $url" >> "$LOG_FILE"
        return 0
    else
        echo "[$(date)] ä¸‹è½½å¤±è´¥: $url (çŠ¶æ€: $status)" >> "$LOG_FILE"
        return 1
    fi
}

# ä¸»ç¨‹åº
main() {
    while read -r url; do
        if [ -n "$url" ]; then
            download_video "$url"
            # é¿å…è¯·æ±‚è¿‡å¿«
            sleep 2
        fi
    done < "$1"
}

# æ‰§è¡Œ
main "$@"
```

### 8.4 è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼

#### ä¿®æ”¹æ–‡ä»¶åæ¨¡æ¿
é»˜è®¤æ–‡ä»¶åæ ¼å¼ï¼š`{æ ‡é¢˜}_{åˆ†è¾¨ç‡}p.{æ‰©å±•å}`

å¯é€šè¿‡ä¿®æ”¹ä»£ç è‡ªå®šä¹‰ï¼š
```python
# åœ¨ video_cli.py ä¸­ä¿®æ”¹
out_name = f"{title_clean}_{chosen_res_str}.%(ext)s"
# æ”¹ä¸ºï¼š
out_name = f"%(title)s_%(resolution)s_%(id)s.%(ext)s"
```

æ”¯æŒçš„æ‰€æœ‰å˜é‡ï¼š
- `%(title)s`ï¼šè§†é¢‘æ ‡é¢˜
- `%(id)s`ï¼šè§†é¢‘ID
- `%(ext)s`ï¼šæ–‡ä»¶æ‰©å±•å
- `%(resolution)s`ï¼šåˆ†è¾¨ç‡
- `%(uploader)s`ï¼šä¸Šä¼ è€…
- `%(upload_date)s`ï¼šä¸Šä¼ æ—¥æœŸ

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ›´æ–°å·¥å…·ï¼Ÿ
**A**ï¼š
```bash
# 1. æ›´æ–°ä»£ç ï¼ˆå¦‚æœæ˜¯gitä»“åº“ï¼‰
git pull origin main

# 2. æ›´æ–°Pythonä¾èµ–
source video/bin/activate
pip install -U -r requirements.txt

# 3. æ›´æ–°yt-dlpï¼ˆé‡è¦ï¼‰
pip install -U yt-dlp
```

### Q2: æ”¯æŒå“ªäº›ç½‘ç«™ï¼Ÿ
**A**ï¼šä¸»è¦æ”¯æŒYouTubeï¼Œä½†yt-dlpæ”¯æŒè¶…è¿‡1000ä¸ªç½‘ç«™ï¼ŒåŒ…æ‹¬ï¼š
- Bilibili, æŠ–éŸ³, å¿«æ‰‹
- Twitter, Instagram, Facebook
- TikTok, Twitch, Vimeo
- å„å¤§è§†é¢‘å¹³å°

### Q3: å¦‚ä½•ä¸‹è½½æ’­æ”¾åˆ—è¡¨ï¼Ÿ
**A**ï¼šç›®å‰ä¸»è¦æ”¯æŒå•ä¸ªè§†é¢‘ä¸‹è½½ã€‚ä¸‹è½½æ’­æ”¾åˆ—è¡¨åŠŸèƒ½ï¼š
```bash
# éœ€è¦æ‰‹åŠ¨å¤„ç†æ¯ä¸ªè§†é¢‘
# æˆ–ä½¿ç”¨yt-dlpåŸç”ŸåŠŸèƒ½ï¼š
yt-dlp -f best "https://youtube.com/playlist?list=xxx"
```

### Q4: ä¸‹è½½çš„æ–‡ä»¶åœ¨å“ªé‡Œï¼Ÿ
**A**ï¼šé»˜è®¤åœ¨ `./download/` ç›®å½•ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æ›´æ”¹ï¼š
```bash
# å‘½ä»¤è¡ŒæŒ‡å®š
./run_video.sh [URL] --output /path/to/directory

# é…ç½®æ–‡ä»¶è®¾ç½®
# defaults.download_dir: "/path/to/directory"
```

### Q5: å¦‚ä½•åªä¸‹è½½éŸ³é¢‘ï¼Ÿ
**A**ï¼šå½“å‰ç‰ˆæœ¬ä¸»è¦é’ˆå¯¹è§†é¢‘ä¸‹è½½ã€‚çº¯éŸ³é¢‘ä¸‹è½½ï¼š
```bash
# ä½¿ç”¨yt-dlpç›´æ¥ä¸‹è½½
yt-dlp -f bestaudio --extract-audio --audio-format mp3 [URL]
```

### Q6: ä¸‹è½½ä¸­æ–­åå¦‚ä½•ç»§ç»­ï¼Ÿ
**A**ï¼šyt-dlpæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œç›´æ¥é‡æ–°è¿è¡Œç›¸åŒå‘½ä»¤å³å¯ç»§ç»­ã€‚

### Q7: å¦‚ä½•æé«˜ä¸‹è½½é€Ÿåº¦ï¼Ÿ
**A**ï¼š
1. å®‰è£…aria2cï¼š`brew install aria2` æˆ– `apt install aria2`
2. ä½¿ç”¨é«˜é€Ÿç½‘ç»œæˆ–ä»£ç†
3. é¿å¼€ç½‘ç»œé«˜å³°æ—¶æ®µ

### Q8: å·¥å…·å®‰å…¨å—ï¼Ÿ
**A**ï¼š
- âœ… å¼€æºä»£ç ï¼Œæ— åé—¨
- âœ… ä»…ä¸‹è½½å…¬å¼€è§†é¢‘
- âœ… ä¸æ”¶é›†ç”¨æˆ·æ•°æ®
- âš ï¸ è¯·éµå®ˆç‰ˆæƒæ³•å¾‹å’Œå¹³å°æ¡æ¬¾

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
```bash
# æŸ¥çœ‹è¯¦ç»†å¸®åŠ©
./run_video.sh --help

# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
source video/bin/activate
python -c "import yt_dlp; print(yt_dlp.version.__version__)"
```

### é—®é¢˜åé¦ˆ
1. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼š`download.log`
2. å¤ç°é—®é¢˜å¹¶è®°å½•æ­¥éª¤
3. æä¾›é”™è¯¯ä¿¡æ¯å’Œç¯å¢ƒä¿¡æ¯

### ç¤¾åŒºæ”¯æŒ
- yt-dlpå®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/yt-dlp/yt-dlp
- Pythonç¤¾åŒºæ”¯æŒ

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

### v1.0ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
- æ–°å¢å‘½ä»¤è¡Œç‰ˆæœ¬ `video_cli.py`
- æ–°å¢è·¨å¹³å°å¯åŠ¨è„šæœ¬
- æ”¯æŒé…ç½®æ–‡ä»¶ç®¡ç†
- ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- å®Œå–„æ–‡æ¡£è¯´æ˜

### æœªæ¥è®¡åˆ’
- [ ] æ’­æ”¾åˆ—è¡¨ä¸‹è½½æ”¯æŒ
- [ ] å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰
- [ ] ä¸‹è½½é˜Ÿåˆ—ç®¡ç†
- [ ] å®æ—¶é€Ÿåº¦æ˜¾ç¤º
- [ ] æ›´å¤šè§†é¢‘å¹³å°æ”¯æŒ

---

## ğŸ“ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡ä½¿ç”¨**ï¼šä»äº¤äº’å¼æ¨¡å¼å¼€å§‹ï¼Œç†Ÿæ‚‰æ“ä½œæµç¨‹
2. **æ‰¹é‡ä¸‹è½½**ï¼šä½¿ç”¨å‘½ä»¤è¡Œæ¨¡å¼å’ŒURLåˆ—è¡¨æ–‡ä»¶
3. **é•¿æœŸä½¿ç”¨**ï¼šé…ç½®å¥½cookiesæ–‡ä»¶å’Œé…ç½®æ–‡ä»¶
4. **é—®é¢˜è¯Šæ–­**ï¼šå¯ç”¨è¯¦ç»†æ—¥å¿—ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜
5. **å®šæœŸæ›´æ–°**ï¼šä¿æŒyt-dlpä¸ºæœ€æ–°ç‰ˆæœ¬

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éµå®ˆç‰ˆæƒ**ï¼šä»…ä¸‹è½½æœ‰æƒé™çš„å†…å®¹
2. **å°Šé‡å¹³å°**ï¼šä¸è¦è¿‡åº¦è¯·æ±‚ï¼Œé¿å…è¢«å°IP
3. **åˆç†ä½¿ç”¨**ï¼šç”¨äºä¸ªäººå­¦ä¹ å’Œç ”ç©¶
4. **ç½‘ç»œåˆè§„**ï¼šéµå®ˆå½“åœ°ç½‘ç»œæ³•å¾‹æ³•è§„
5. **æ•°æ®å®‰å…¨**ï¼šå¦¥å–„ä¿ç®¡cookiesç­‰è®¤è¯ä¿¡æ¯

---

**æœ€åæ›´æ–°**ï¼š2026å¹´2æœˆ24æ—¥
**ç‰ˆæœ¬**ï¼š1.0
**ä½œè€…**ï¼šè§†é¢‘ä¸‹è½½å·¥å…·å¢å¼ºç‰ˆ
**åŸºäº**ï¼šyt-dlp 2026.01.31